# AdMetricsBot

Че надо сделать:
1) ~~Прикрутить битрикс и покетное получение~~
2) ~~Уйти с тестового апи директа~~
3) ~~Прикрутить бд~~
4) Настроить резервное копирование
5) ~~Закинуть параметры пользователя в базу и сделать регистрацию~~
6) ~~Сделать авторизацию в директе~~
7) ~~Добавить логирование~~
8) ~~Убрать ошибку валидации хибернейта или сделать валидацию~~
9) ~~Перейти на рег ру~~
10) ~~Залить прилку на докер~~
11) ~~Сменить бд на постгрескъюэль~~
12) ~~Добавить сообщение о необходимости регистрации чтобы всё работало~~
13) ~~Сделать возможность отвязки аккаунта и удалении данных~~
14) ~~Сделать возможность просто выключения, чтобы не получать сообщения~~
15) Вытащить все ключи апи и тд в отдельный файл и глянуть как это у людей делается
16) ~~Синхронизация времени. Привязка времени к гео (часовые пояса)~~
17) ~~Прикрутить потоки и сделать паралельное получение данных, а надо ли?~~
18) ~~Написать логику~~
19) ~~Несколько аккаунтов~~
20) ~~Настройка регулярного оповещения~~
21) Указание валюты и перерасчёт источников
22) ~~Проверить ошибку пустого аккаунта в Яд~~
23) ~~Сделать автоматическую переадресацию при получении токена YA??? Убрать необходимость нажать кнопку, или нет???~~
24) ~~Автоматическое закрытие браузера после ссылки работает невезде так что хрен с ним~~
25) ~~Добавить отображение количества продаж(успешных сделок) с битрикса~~
26) ~~Spring data JPA?~~
27) ~~Выпилить ломбок?~~
28) ~~Защита от воровства данных. Програмист по визам что-то там говорил про ssl~~
29) ~~Прикрутить домен к докеру/серверу и тд~~
30) ~~Проверить список дел на дубли~~
31) ~~Эксцепшин на получение токена ??~~
32) Подумать над авторизацией яндекса в частности редиректного кастыля
33) ~~Протестировать общее сообщение всем пользователям~~
34) Добавить индекс страничку
35) Сделать админку для просмотра статистики
36) ~~Удалять данные по отдельности, например только яндекс~~
37) ~~Убрать переменные из кода                                 проверить                   наверное хардкод?~~
38) ~~Упорядочить методы в телеграм боте и сделать рефакторинг, узнать как их лучше всего разпределить~~
39) ~~Сделать пробный показ~~
40) Добавить очистку кнопок в чате после нажатия
41) ~~Починить битрикс, зарегать там прилку~~
42) Подключить АмоСРМ
43) Подключить VK
44) Подключить Yclients
45) Подключить Mytarget
46) Добавить возможность оставить отзывы
47) Бан негодяев 
48) Если не добавлен ни один сервис - не отправлять сообщения, сделать проверку всех сервисов?
49) ~~Разделить регистрацию и отправку сообщений на микро сервисы? нет~~
50) ~~Расчёт делать заранее в 00 00? сделал кеш на каждый час~~
51) ~~Валидность времени~~
52) ~~Если время указано. А?~~
53) ~~Сделать отправку инфы по часам? нет~~
54) ~~Прокоментить код~~
55) Выбор периодов
56) Все маркетинговые показатели которые возможно, рои, выручка
57) Записывать в файл неизвестные команды пользователя
58) Пример отчета
59) ~~Переделать лонг полинг бот в более эффективное что-то. На вебхуки~~
60) Добавить микро сервис проверки местного времени для учета летнего времени
61) Мультиланг
62) ~~Почистить код и сделать рефакторинг~~
63) ~~Кеш состояния пользователя, зачем? да~~
64) ~~Сделать запасной вариант получения часового пояса, надо ли?~~
65) ~~Инициализация стадии пользователя, если кеш пропал или произошла какая-нибудь херня, кеша состояния мб не будет~~
66) ~~Нужно добавить функцию изменения планировщика при добавлении нового пользователя.~~ отменено
67) ~~Сделать инжекцию задержки сеттером~~
68) Подумать ещё над методом отправки сообщений
69) ~~При запросе у пользователя информации с помощью ввода, сделать удаление старого сообщения~~
70) Сделать в базе лист на удаление старых сообщений, или не надо, хз, подумать над этим
71) переделать логирование и комменты 
72) Разное время для разных проектов
73) Проверка на одинаковые имена проектов.. что это за слово???? типа чтобы у одного пользователя не было одинаково названных проектов
74) Сделать обработку команды /help
75) Найти по названию проект
76) Список всех проектов текстом
77) ~~Динамическая кнопка "удалить источник"~~
78) прикрутить логины в яндекс и сделать в кнопки
79) При обновлении токена битрикс он два раза берет одно и то же из базы. Нужно сделать чтобы он перекидывал в метод токен
80) Убрать запрос в базу при использовании страниц в списке проектов
81) Подумать над счетчиком проектов в базе
82) ~~Добавить обработку ошибки битрикс: org.springframework.web.client.HttpClientErrorException$Unauthorized: 401 Unauthorized: "{"error":"ACCESS_DENIED","error_description":"REST is available only on commercial plans."}"~~
83) ERROR_OAUTH: Application not installed туда же
84) Убрать возвращение null в стейт хендлере. Сделать метод с ретурном также как без него
85) Разобраться с паролями и гитом
86) При нажатии кнопки настроек без регистрации происходит ошибка, нужно чтобы он зарегался
87) 2023-10-07T13:06:18.836+07:00 ERROR 16636 --- [nio-8080-exec-1] c.k.AdMetricsBot.telegram.AdMetricsBot   : java.lang.NullPointerException: Cannot invoke "String.contains(java.lang.CharSequence)" because "userState" is null
88) ~~2023-10-07T14:17:01.611+07:00 ERROR 15940 --- [nio-8080-exec-8] c.k.A.t.u.Messages.MessageEventHandler   : ERROR_TEXTError executing org.telegram.telegrambots.meta.api.methods.updatingmessages.DeleteMessage query: [400] Bad Request: message identifier is not specified возникает при вводе домена битрикса~~
89) Проверить лишние изменения состояния юзера в коллбеках
90) Пить пиво